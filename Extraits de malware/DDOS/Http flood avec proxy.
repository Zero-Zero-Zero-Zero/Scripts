import aiohttp  # Bibliothèque pour faire des requêtes HTTP asynchrones
import asyncio  # Bibliothèque pour gérer les tâches asynchrones
import colorama # Bibliothèque pour ajouter des couleurs dans la console

async def send_request(session, url, proxy):
    """Envoie une requête à une URL via un proxy et gère les échecs."""
    try:
        # Envoie une requête GET à l'URL via le proxy avec un timeout de 0.5 seconde
        async with session.get(f"http://{url}", proxy=f"http://{proxy}", timeout=0.5) as response:
            return f"{GREEN}Proxy {proxy}: Success: {response.status} (http){RESET}"  # Retourne un message de succès
    except Exception as e:
        # Si la requête échoue, retourne un message d'erreur
        return f"{RED}Proxy {proxy}: Error: Connection failed{RESET}"
